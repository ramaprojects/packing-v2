<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Resi</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light">

    <header class="d-flex sticky-top bg-white border-bottom justify-content-around p-3">
        <h6 class="mb-0 mt-2">Resi</h6>
    </header>

    <main class="container-fluid py-3 mb-4">
        <!-- QUEUE -->
        <div id="resi-summary" class="d-flex flex-column gap-2"></div>
    </main>

    <!-- 1. Overlay Gelap untuk Latar Belakang Modal -->
    <div id="resi-panel-overlay" class="d-none"></div>

    <!-- 2. Panel Input Resi (Modal Bottom Sheet) -->
    <div id="resi-panel" class="resi-panel-container">
        <div class="resi-panel-header">
            <h6 id="resi-title" class="mb-0">Input Resi</h6>
            <button id="btn-close-panel" class="btn-close"></button>
        </div>
        <div class="resi-panel-body">
            <div id="resi-shipping-summary" class="mb-3">
                <!-- Info penerima akan dimuat di sini -->
            </div>

            <input id="input-resi-number" class="form-control mb-2" placeholder="Ketik atau Scan Nomor Resi" />

            <!-- Pratinjau Foto Resi -->
            <img id="resi-photo-preview" class="img-fluid rounded my-2 d-none" src="#" alt="Pratinjau Foto Resi" />

            <div class="d-flex gap-2 mt-2 mb-3">
                <button id="btn-scan-resi" class="btn btn-outline-secondary w-50">
                    <i class="bi bi-qr-code-scan me-1"></i> Scan
                </button>
                <input type="file" id="input-upload-resi" accept="image/*" capture="environment" class="d-none" />
                <button id="btn-upload-resi" class="btn btn-outline-secondary w-50">
                    <i class="bi bi-camera-fill me-1"></i> Upload
                </button>
            </div>
            <div class="d-grid">
                <button id="btn-finish-resi" class="btn btn-primary" disabled>
                    Simpan dan Selesaikan
                </button>
            </div>
        </div>
    </div>
    <!-- === AKHIR PERUBAHAN === -->


    <div id="scanner-container" style="display:none; position:fixed; inset:0; background:#000; z-index:1100;">
        <div id="scanner" style="width:100%; height:100%;"></div>

        <button id="btn-close-scan" class="btn btn-light"
            style="position:absolute; bottom:16px; left:16px; right:16px;">
            Tutup Scanner
        </button>
    </div>

    <nav class="fixed-bottom bg-white border-top">
        <div class="d-flex bottom-nav justify-content-around py-2">
            <button class="nav-item" data-nav="dashboard"><i
                    class="nav-icon bi bi-house-door"></i><span>Dashboard</span></button>
            <button class="nav-item" data-nav="checklist"><i
                    class="nav-icon bi bi-list-check"></i><span>Checklist</span></button>
            <button class="nav-item active position-relative" data-nav="resi"><i
                    class="nav-icon bi bi-truck"></i><span>Resi</span><span id="resi-badge-nav"
                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger d-none">!</span></button>
            <button class="nav-item" data-nav="history"><i
                    class="nav-icon bi bi-clock-history"></i><span>History</span></button>
        </div>
    </nav>


    <!-- overlay loading -->
    <div id="loading-overlay"
        class="d-none position-fixed top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex justify-content-center align-items-center"
        style="z-index: 1050;">
        <div class="d-flex flex-column justify-content-center align-items-center">
            <div class="spinner-border text-dark" role="status"></div>
            <span class="mt-2">Mohon ditunggu ya...</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
    <script src="resi.js"></script>
    <script src="https://unpkg.com/@ericblade/quagga2/dist/quagga.js"></script>
    <script src="scan-resi.js"></script>
</body>

</html>